# 4. Project analysis and concepts

This section presents a comprehensive analysis of the Modula system, focusing on its functional and non-functional requirements, system users, and core operational workflows. The purpose of this section is to translate the project’s vision and architectural decisions into clearly defined system behaviors and quality attributes, ensuring that the proposed solution is both feasible and aligned with real-world operational needs of Food & Beverage (F&B) businesses.

The analysis in this section is grounded in the finalized module specifications and the implemented business logic developed during Capstone I. Throughout the project, multiple iterations were performed to refine system boundaries, clarify responsibilities between core and feature modules, and resolve ambiguities discovered during implementation. As a result, the requirements and behaviors discussed in this section reflect practical design choices rather than hypothetical or purely conceptual features.

To maintain academic rigor and scope control, this analysis focuses exclusively on the functionalities delivered within the Capstone I phase. Advanced features such as automated subscription billing, cross-branch analytical aggregation, hardware-level POS integrations, and notification systems are intentionally excluded and reserved for future development phases. This ensures that the presented requirements remain realistic, testable, and achievable within the defined project timeline.

The section is structured as follows. Section 4.1 defines the functional requirements of the system, describing what the system must do to support daily operations such as sales processing, inventory management, staff attendance, and cash handling. Section 4.2 outlines the non-functional requirements, addressing system qualities including security, performance, usability, reliability, portability, and maintainability. Finally, Section 4.3 analyzes the system from a user and behavioral perspective by identifying system actors and illustrating their interactions through use case and activity diagrams.

Together, these analyses provide a clear and structured understanding of how Modula operates as a modular, scalable POS system and how its design decisions support both current operational needs and future system evolution.

## 4.1 Functional Requirements

This subsection defines the functional requirements of the Modula system, specifying the core behaviors the system must provide to support daily operations of Food & Beverage (F&B) businesses. The requirements are derived from finalized module specifications, validated business logic, and practical implementation during Capstone I. Each requirement is written to be clear, testable, and aligned with the approved project scope.

The functional requirements are organized by operational domain for clarity and traceability.

---

### 4.1.1 User Authentication and Authorization

The system shall provide secure authentication and role-based authorization to control access to system features and data.

- The system shall allow users to authenticate using a phone number and password.
- The system shall support role-based access control with predefined roles, including Admin, Manager, and Cashier.
- The system shall restrict access to features and data based on the authenticated user’s role and assigned branch context.
- The system shall allow a single user account to be associated with multiple tenants, enabling one user to manage multiple businesses.
- The system shall maintain authenticated sessions to ensure continuity during active operations.

These requirements ensure security, accountability, and controlled access in a multi-user POS environment.

---

### 4.1.2 Sales and Order Processing

The system shall support end-to-end sales processing, from item selection to order fulfillment.

- The system shall allow authorized users (Admin, Manager, Cashier) to create sales by selecting menu items and applicable modifiers.
- The system shall support different sale types, including dine-in, take-away, and delivery.
- The system shall allow users to review and modify a cart before checkout, including item quantities and selected modifiers.
- The system shall calculate item-level subtotals, item-level discounts, branch-level discounts, value-added tax (VAT), and grand totals.
- The system shall support transactions in both USD and Khmer Riel (KHR), displaying transaction amounts in both currencies.
- The system shall finalize sales into orders with defined lifecycle states such as in-prep, ready, delivered, void-pending, and voided.
- The system shall allow cashiers to request voiding of finalized sales, subject to approval by a Manager or Admin.
- The system shall prevent unauthorized modification of finalized or voided sales while preserving a complete audit trail.

These requirements ensure accurate transaction handling and controlled management of sensitive operations.

---

### 4.1.3 Inventory Management

The system shall provide inventory management capabilities to support stock visibility and control.

- The system shall allow administrators to create, update, archive, and restore stock items.
- The system shall allow stock items to exist without a category and be treated as uncategorized.
- The system shall maintain inventory quantities at the branch level.
- The system shall automatically deduct inventory quantities when a sale is finalized, subject to inventory policy settings.
- The system shall record all inventory changes using a journal-based approach to preserve a complete history of stock movements.
- The system shall support expiration date tracking for inventory items where enabled.

These requirements address common challenges in manual inventory tracking and improve accuracy and accountability.

---

### 4.1.4 Menu Management

The system shall support flexible configuration of menus used during sales operations.

- The system shall allow administrators to create, update, archive, and restore menu items.
- The system shall allow menu items to be organized into categories while permitting items without categories to remain uncategorized.
- The system shall allow administrators to create and manage modifier groups and assign them to menu items.
- The system shall support modifier-based price adjustments that contribute to the final item price.
- The system shall allow menu items to be assigned to one or multiple branches and removed from branch availability without deletion.
- The system shall preserve historical sales data even when menu items are archived.

These requirements ensure menu flexibility while maintaining historical consistency.

---

### 4.1.5 Cash Session and Cash Handling

The system shall support controlled cash handling through structured cash session management.

- The system shall allow authorized users to start and close cash sessions with recorded opening and closing cash amounts.
- The system shall associate all cash-based sales with an active cash session when required by policy.
- The system shall support cash movements including paid-in and paid-out transactions, subject to tenant policy settings.
- The system shall require managerial or administrative approval for sensitive cash operations such as refunds and over-limit paid-outs.
- The system shall calculate expected cash totals and cash variance upon session closure.

These requirements provide transparency and accountability in cash-based transactions.

---

### 4.1.6 Staff Attendance Management

The system shall support staff attendance tracking to record work sessions and enforce operational policies.

- The system shall allow staff members to check in and check out based on branch context.
- The system shall enforce attendance policies such as out-of-shift approval and early check-in buffers.
- The system shall prevent staff from being checked in at multiple branches simultaneously.
- The system shall allow administrators and managers to view attendance records across assigned branches.
- The system shall preserve attendance records as immutable historical data.

These requirements improve workforce accountability while maintaining data integrity.

---

### 4.1.7 Discount Management

The system shall support basic discount management to enable promotional pricing.

- The system shall allow administrators to create percentage-based discounts.
- The system shall support item-level and branch-level discounts with defined stacking behavior.
- The system shall apply discounts automatically during sale calculation once configured.
- The system shall lock discounts into finalized sales to prevent retroactive modification.
- The system shall allow managers and cashiers to view applicable discounts without modification privileges.

These requirements simplify promotional pricing while avoiding operational ambiguity.

---

### 4.1.8 Reporting and Records

The system shall provide basic reporting capabilities to support operational oversight.

- The system shall generate sales reports summarizing transactions within a selected time period.
- The system shall include pending void transactions in reports with appropriate status indicators.
- The system shall generate inventory reports reflecting current stock levels.
- The system shall restrict reporting access to authorized administrative roles.

These requirements support informed decision-making and operational transparency.

---

### 4.1.9 Offline Operation and Synchronization

The system shall support offline operation to ensure business continuity during network disruptions.

- The system shall allow sales, inventory updates, and attendance actions to be recorded offline.
- The system shall queue offline actions locally and synchronize them when connectivity is restored.
- The system shall ensure idempotent synchronization to prevent data duplication or loss.
- The system shall resolve conflicts using server-side validation and policy enforcement.

These requirements ensure reliable operation in environments with unstable connectivity.

## 4.2 Non-Functional Requirements

This subsection defines the non-functional requirements of the Modula system, focusing on the quality attributes that determine how well the system performs its intended functions. Unlike functional requirements, which describe what the system does, non-functional requirements describe the conditions under which the system operates and the qualities it must exhibit to be reliable, usable, and maintainable in real-world environments.

The non-functional requirements presented here are derived from the operational context of small and medium-sized F&B businesses in Cambodia, technical constraints identified during development, and best practices observed in mature POS systems. These requirements are scoped strictly to Capstone I and reflect deliberate design trade-offs made during implementation.

---

### 4.2.1 Security

The system shall ensure that business data and operations are protected against unauthorized access and misuse.

- The system shall enforce role-based access control to restrict sensitive actions such as voiding sales, managing inventory, and viewing reports.
- The system shall ensure that authentication credentials are securely handled and never exposed in plaintext.
- The system shall prevent unauthorized modification of finalized transactional data, including sales, inventory records, and attendance logs.
- The system shall record critical actions in an audit log to support traceability and accountability.

These security measures are essential in POS systems to prevent fraud, data tampering, and unauthorized operational changes.

---

### 4.2.2 Performance

The system shall provide responsive performance suitable for high-frequency transactional environments.

- The system shall support rapid item selection and checkout workflows to minimize customer wait times.
- The system shall perform core operations such as sale creation and cart calculation with minimal latency.
- The system shall continue to function during intermittent network connectivity without blocking essential operations.

Performance considerations are particularly important in retail and F&B contexts where delays directly affect customer experience.

---

### 4.2.3 Usability

The system shall be designed to be intuitive and easy to use for staff with varying levels of technical familiarity.

- The system shall minimize manual decision-making during sales by automating calculations such as discounts, tax, and currency conversion.
- The system shall provide role-specific user interfaces, ensuring that users only see features relevant to their responsibilities.
- The system shall present policies and configuration options in a structured and understandable manner, similar to familiar settings interfaces.
- The system shall allow common workflows, such as sales and attendance actions, to be completed with minimal steps.

High usability reduces training time and operational errors in fast-paced service environments.

---

### 4.2.4 Reliability

The system shall operate consistently and preserve data integrity under normal and adverse conditions.

- The system shall ensure that transactional data remains consistent even when operations are performed offline.
- The system shall use journal-based recording for critical data such as inventory movements and cash sessions to prevent data loss.
- The system shall ensure that partial or failed operations do not result in inconsistent system states.
- The system shall preserve historical records even when entities such as menu items or staff accounts are archived.

Reliability is critical in POS systems where data loss or inconsistency can directly impact financial reporting.

---

### 4.2.5 Portability

The system shall be deployable and usable across multiple device types and environments.

- The system shall be accessible through modern web browsers on phones, tablets, and computers.
- The system shall not require dedicated POS hardware to perform core operations in Capstone I.
- The system shall support future extension to mobile applications without fundamental architectural changes.

This ensures that Modula remains accessible to small businesses with limited hardware resources.

---

### 4.2.6 Maintainability

The system shall be structured to support long-term maintenance and incremental enhancement.

- The system shall adopt a modular architecture separating core modules from feature modules.
- The system shall allow individual modules to evolve independently without requiring full system redesign.
- The system shall centralize cross-cutting concerns such as policy enforcement and audit logging.
- The system shall limit inter-module coupling to clearly defined interfaces.

Maintainability ensures that Modula can evolve beyond Capstone I without accumulating excessive technical debt.

---

### 4.2.7 Scalability

The system shall be capable of supporting growth in users, data volume, and operational complexity.

- The system shall support multiple tenants within a single deployment.
- The system shall support expansion from single-branch to multi-branch operations.
- The system shall allow new feature modules to be added without disrupting existing workflows.

Scalability considerations ensure that Modula can transition from a capstone project to a production-ready platform.

---

Together, these non-functional requirements define the quality standards Modula must meet to be considered a reliable, usable, and maintainable POS system within its defined scope.

## 4.3 Analysis of the Project

### 4.3.1 System Users

This subsection identifies the primary users of the Modula system and analyzes their roles, responsibilities, and access boundaries. Clearly defining system users is essential to ensure that functionalities, permissions, and workflows are aligned with real operational practices in Food & Beverage (F&B) businesses.

Modula adopts a role-based user model to balance operational efficiency, security, and accountability. Each user role is associated with a specific set of responsibilities and permissions, enforced by the authentication and authorization mechanism of the system.

---

### Admin

The Admin represents the business owner or a trusted individual responsible for overall system configuration and oversight.

**Responsibilities:**

- Configure tenant-level settings such as policies related to tax, currency, inventory behavior, attendance, and cash handling.
- Manage core operational data including menu items, inventory items, and branch information.
- Create and manage staff accounts and assign roles.
- View system-wide records such as sales reports, inventory reports, attendance logs, and cash session summaries.
- Approve sensitive operations such as sale void requests, cash refunds, and out-of-shift attendance when required.

**Permissions:**

- Full access to all system modules within the tenant context.
- Read and write access to administrative features.
- Approval authority for restricted or high-risk actions.

The Admin role ensures centralized control and accountability for business-critical decisions.

---

### Manager

The Manager role represents supervisory staff responsible for overseeing daily operations at one or more assigned branches.

**Responsibilities:**

- Monitor sales, orders, and inventory status within assigned branches.
- Approve operational requests such as sale voids, cash refunds, or out-of-shift attendance, depending on policy settings.
- Review attendance records and cash session summaries for assigned branches.
- Support cashiers in resolving operational issues during shifts.

**Permissions:**

- Limited administrative access scoped to assigned branches.
- Approval privileges for selected actions as defined by policy.
- Read-only access to most configuration settings.

The Manager role acts as an operational intermediary between Admin and Cashier, providing oversight without full system control.

---

### Cashier

The Cashier role represents frontline staff responsible for executing sales and basic operational tasks.

**Responsibilities:**

- Perform sales transactions by selecting menu items, modifiers, and sale types.
- Manage active orders, including updating order statuses.
- Start and close cash sessions when required by policy.
- Record attendance through check-in and check-out actions.
- View personal attendance history and assigned work shifts.

**Permissions:**

- Access to sales and order-related functionalities.
- Restricted access to configuration and reporting features.
- No authority to modify finalized sales or system policies.

The Cashier role is designed to minimize complexity and reduce the risk of operational errors by limiting access to only essential functions.

---

By clearly separating responsibilities and permissions among Admin, Manager, and Cashier roles, Modula ensures operational clarity, security, and traceability. This role-based model forms the foundation for subsequent analysis of use cases and activity workflows in the following sections.

## 4.3.2 Use Case Diagram (Textual Specification)

This subsection provides a textual specification of the use case diagrams for the Modula POS system. The descriptions below are intended to guide the construction of formal use case diagrams by clearly defining system boundaries, actors, and their interactions. Only functionalities implemented within Capstone I are included.

### System Boundary

System Name: Modula POS System

All use cases described below occur within this system boundary.

### Actors

- Admin
- Manager
- Cashier

---

### Common Use Cases

The following use cases are accessible by all actors:

- Authenticate User
- View Dashboard
- View Orders
- View eReceipt

---

### Admin Use Cases

The Admin actor interacts with the following use cases:

- Manage Tenant Profile
    - Update business name
    - Upload logo
    - Update contact information
- Manage Branches
    - Create branch
    - Update branch details
    - Assign staff to branches
- Manage Staff
    - Create staff accounts
    - Assign roles (Admin, Manager, Cashier)
    - Activate or archive staff
- Manage Menu
    - Create and update menu items
    - Manage modifier groups
    - Assign menu items to branches
- Manage Inventory
    - Create inventory items
    - Restock inventory
    - View inventory status
- Configure Policies
    - Tax and currency settings
    - Inventory behavior settings
    - Cash session rules
    - Attendance rules
- Approve Sale Void
    - Approve or reject void requests
- View Reports
    - Sales reports
    - Inventory reports
    - Cash session reports
    - Attendance reports

---

### Manager Use Cases

The Manager actor interacts with the following use cases:

- View Branch Dashboard
- View Orders
- Approve Sale Void (if permitted by policy)
- Approve Cash Refund or Paid Out (if permitted by policy)
- View Attendance Records (assigned branches only)
- View Reports (branch-scoped)

Managers do not have permission to configure system-wide settings or manage tenants.

---

### Cashier Use Cases

The Cashier actor interacts with the following use cases:

- Start Cash Session
- Create Sale
- Manage Cart
    - Add or remove items
    - Update item quantities
    - Select sale type
- Finalize Sale
- View Orders
    - Update order status (in-prep → ready → delivered)
- Request Sale Void
- Check In and Check Out
- View Personal Attendance History

Cashiers do not have permission to approve voids, manage policies, or view reports.

---

### Use Case Relationships

- Create Sale includes Manage Cart
- Finalize Sale includes Create Order
- Finalize Sale includes Generate eReceipt
- Request Sale Void extends Approve Sale Void

The <<include>> relationship represents mandatory sub-processes, while the <<extend>> relationship represents conditional approval flows.

---

## 4.3.3 Activity Diagrams (Textual Specification)

This subsection describes the activity flows of key system operations. The descriptions below are intended to guide the construction of activity diagrams and reflect actual system behavior.

---

### Activity Diagram: User Login

1. Start
2. User enters phone number and password
3. System validates credentials
4. Decision: credentials valid?
    - No: display error message and end
    - Yes: load user role and tenant context
5. Redirect user to role-specific dashboard
6. End

---

### Activity Diagram: Sale and Order Creation

1. Start
2. Cashier accesses the Sale module
3. Decision: is a cash session required by policy?
    - Yes: check for active cash session
        - No active session: prompt user to start cash session
4. Cashier adds menu items to cart
5. Cashier selects sale type (dine-in, take-away, delivery)
6. System calculates subtotal, discounts, VAT, and grand total
7. Cashier selects payment method
8. Cashier confirms checkout
9. System finalizes sale
10. System creates order with status = in-prep
11. System generates eReceipt
12. End

---

### Activity Diagram: Order Status Update

1. Start
2. User selects an existing order
3. System checks current order status
4. User updates order status
    - in-prep → ready
    - ready → delivered
5. System saves updated status
6. End

---

### Activity Diagram: Sale Void Request and Approval

1. Start
2. Cashier selects a finalized order
3. Cashier submits a void request
4. System updates sale status to void-pending
5. Manager or Admin reviews void request
6. Decision: void approved?
    - Yes: system reverses sale and inventory changes, status set to voided
    - No: system restores sale status to finalized
7. End

---

### Activity Diagram: Inventory Deduction

1. Start
2. Sale is finalized
3. System checks inventory deduction policy
4. If enabled, system deducts stock using journal records
5. Update branch inventory levels
6. End

---

### Activity Diagram: Cash Session Lifecycle

1. Start
2. User starts cash session
3. User inputs opening cash amount
4. Perform sales transactions
5. Record paid-in or paid-out actions if permitted
6. User closes cash session
7. User inputs counted cash amount
8. System calculates cash variance
9. End