# 4. Project analysis and concepts

This section presents a comprehensive analysis of the Modula system, focusing on its functional and non-functional requirements, system users, and core operational workflows. The purpose of this section is to translate the project’s vision and architectural decisions into clearly defined system behaviors and quality attributes, ensuring that the proposed solution is both feasible and aligned with real-world operational needs of Food & Beverage (F&B) businesses.

The analysis in this section is grounded in the finalized module specifications and the implemented business logic developed during Capstone I. Throughout the project, multiple iterations were performed to refine system boundaries, clarify responsibilities between core and feature modules, and resolve ambiguities discovered during implementation. As a result, the requirements and behaviors discussed in this section reflect practical design choices rather than hypothetical or purely conceptual features.

To maintain academic rigor and scope control, this analysis focuses exclusively on the functionalities delivered within the Capstone I phase. Advanced features such as automated subscription billing, cross-branch analytical aggregation, hardware-level POS integrations, and notification systems are intentionally excluded and reserved for future development phases. This ensures that the presented requirements remain realistic, testable, and achievable within the defined project timeline.

The section is structured as follows. Section 4.1 defines the functional requirements of the system, describing what the system must do to support daily operations such as sales processing, inventory management, staff attendance, and cash handling. Section 4.2 outlines the non-functional requirements, addressing system qualities including security, performance, usability, reliability, portability, and maintainability. Finally, Section 4.3 analyzes the system from a user and behavioral perspective by identifying system actors and illustrating their interactions through use case and activity diagrams.

Together, these analyses provide a clear and structured understanding of how Modula operates as a modular, scalable POS system and how its design decisions support both current operational needs and future system evolution.

## 4.1 Functional Requirements

This subsection defines the functional requirements of the Modula system, specifying the core behaviors the system must provide to support daily operations of Food & Beverage (F&B) businesses. The requirements are derived from finalized module specifications, validated business logic, and practical implementation during Capstone I. Each requirement is written to be clear, testable, and aligned with the approved project scope.

The functional requirements are organized by operational domain for clarity and traceability.

---

### 4.1.1 User Authentication and Authorization

The system shall provide secure authentication and role-based authorization to control access to system features and data.

- The system shall allow users to authenticate using a phone number and password.
- The system shall support role-based access control with predefined roles, including Admin, Manager, and Cashier.
- The system shall restrict access to features and data based on the authenticated user’s role and assigned branch context.
- The system shall allow a single user account to be associated with multiple tenants, enabling one user to manage multiple businesses.
- The system shall maintain authenticated sessions to ensure continuity during active operations.

These requirements ensure security, accountability, and controlled access in a multi-user POS environment.

---

### 4.1.2 Sales and Order Processing

The system shall support end-to-end sales processing, from item selection to order fulfillment.

- The system shall allow authorized users (Admin, Manager, Cashier) to create sales by selecting menu items and applicable modifiers.
- The system shall support different sale types, including dine-in, take-away, and delivery.
- The system shall allow users to review and modify a cart before checkout, including item quantities and selected modifiers.
- The system shall calculate item-level subtotals, item-level discounts, branch-level discounts, value-added tax (VAT), and grand totals.
- The system shall support transactions in both USD and Khmer Riel (KHR), displaying transaction amounts in both currencies.
- The system shall finalize sales into orders with defined lifecycle states such as in-prep, ready, delivered, void-pending, and voided.
- The system shall allow cashiers to request voiding of finalized sales, subject to approval by a Manager or Admin.
- The system shall prevent unauthorized modification of finalized or voided sales while preserving a complete audit trail.

These requirements ensure accurate transaction handling and controlled management of sensitive operations.

---

### 4.1.3 Inventory Management

The system shall provide inventory management capabilities to support stock visibility and control.

- The system shall allow administrators to create, update, archive, and restore stock items.
- The system shall allow stock items to exist without a category and be treated as uncategorized.
- The system shall maintain inventory quantities at the branch level.
- The system shall automatically deduct inventory quantities when a sale is finalized, subject to inventory policy settings.
- The system shall record all inventory changes using a journal-based approach to preserve a complete history of stock movements.
- The system shall support expiration date tracking for inventory items where enabled.

These requirements address common challenges in manual inventory tracking and improve accuracy and accountability.

---

### 4.1.4 Menu Management

The system shall support flexible configuration of menus used during sales operations.

- The system shall allow administrators to create, update, archive, and restore menu items.
- The system shall allow menu items to be organized into categories while permitting items without categories to remain uncategorized.
- The system shall allow administrators to create and manage modifier groups and assign them to menu items.
- The system shall support modifier-based price adjustments that contribute to the final item price.
- The system shall allow menu items to be assigned to one or multiple branches and removed from branch availability without deletion.
- The system shall preserve historical sales data even when menu items are archived.

These requirements ensure menu flexibility while maintaining historical consistency.

---

### 4.1.5 Cash Session and Cash Handling

The system shall support controlled cash handling through structured cash session management.

- The system shall allow authorized users to start and close cash sessions with recorded opening and closing cash amounts.
- The system shall associate all cash-based sales with an active cash session when required by policy.
- The system shall support cash movements including paid-in and paid-out transactions, subject to tenant policy settings.
- The system shall require managerial or administrative approval for sensitive cash operations such as refunds and over-limit paid-outs.
- The system shall calculate expected cash totals and cash variance upon session closure.

These requirements provide transparency and accountability in cash-based transactions.

---

### 4.1.6 Staff Attendance Management

The system shall support staff attendance tracking to record work sessions and enforce operational policies.

- The system shall allow staff members to check in and check out based on branch context.
- The system shall enforce attendance policies such as out-of-shift approval and early check-in buffers.
- The system shall prevent staff from being checked in at multiple branches simultaneously.
- The system shall allow administrators and managers to view attendance records across assigned branches.
- The system shall preserve attendance records as immutable historical data.

These requirements improve workforce accountability while maintaining data integrity.

---

### 4.1.7 Discount Management

The system shall support basic discount management to enable promotional pricing.

- The system shall allow administrators to create percentage-based discounts.
- The system shall support item-level and branch-level discounts with defined stacking behavior.
- The system shall apply discounts automatically during sale calculation once configured.
- The system shall lock discounts into finalized sales to prevent retroactive modification.
- The system shall allow managers and cashiers to view applicable discounts without modification privileges.

These requirements simplify promotional pricing while avoiding operational ambiguity.

---

### 4.1.8 Reporting and Records

The system shall provide basic reporting capabilities to support operational oversight.

- The system shall generate sales reports summarizing transactions within a selected time period.
- The system shall include pending void transactions in reports with appropriate status indicators.
- The system shall generate inventory reports reflecting current stock levels.
- The system shall restrict reporting access to authorized administrative roles.

These requirements support informed decision-making and operational transparency.

---

### 4.1.9 Offline Operation and Synchronization

The system shall support offline operation to ensure business continuity during network disruptions.

- The system shall allow sales, inventory updates, and attendance actions to be recorded offline.
- The system shall queue offline actions locally and synchronize them when connectivity is restored.
- The system shall ensure idempotent synchronization to prevent data duplication or loss.
- The system shall resolve conflicts using server-side validation and policy enforcement.

These requirements ensure reliable operation in environments with unstable connectivity.
